!function(){function t(t,n){var r={version:"2.0.1"};return r.default={},r.default._MARGIN={top:30,left:30,right:30,bottom:30},r.default._COLOR=t.scale.category10(),r.utils={},r.utils.dfc={},r.utils.dfc.json2arr=function(t){var n=[];return t.map(function(t){var r=[];for(var e in t)r.push(t[e]);n.push(r)}),n},r.filter={},r.filter.maxInArrs=function(n){var r=[],e=[],o=0,a=0;return n.map(function(t){r.push(t[0]),e.push(t[1])}),o=t.max(r,function(t){return+t}),a=t.max(e,function(t){return+t}),[o,a]},r.filter.minInArrs=function(n){var r=[],e=[],o=0,a=0;return n.map(function(t){r.push(t[0]),e.push(t[1])}),o=t.min(r,function(t){return+t}),a=t.min(e,function(t){return+t}),[o,a]},r.barChart=function(n,e){function o(n){var r=n.append("g").attr("class","axes"),e=t.svg.axis().scale(T).orient("bottom");j&&e.tickFormat(function(t){return t+j});var o=t.svg.axis().scale(k).orient("left").ticks(M);L&&o.tickFormat(function(t){return t+L}),R&&r.append("g").attr("class","x-axis").attr("transform",function(){return"translate("+s()+","+c()+")"}).call(e),_&&r.append("g").attr("class","y-axis").attr("transform",function(){return"translate("+s()+","+u()+")"}).call(o),O&&r.selectAll("g.x-axis g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",-(g-2*F.bottom)),X&&r.selectAll("g.y-axis g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",f()).attr("y2",0)}function a(t){t.append("defs").append("clipPath").attr("id","body-clip").append("rect").attr("x",0).attr("y",0).attr("width",f()+10).attr("height",p())}function i(t,n){h||(h=t.append("g").attr("class","body").attr("transform","translate("+s()+","+u()+")").attr("clip-path","url(#body-clip)")),l(t,n)}function l(n,o){var a=.2*Math.floor(f()/w.length),i=h.selectAll("rect.bar").data(w).enter().append("rect").attr("class","bar");h.selectAll("rect.bar").data(w).transition().style("fill",function(t,n){return void 0!==e.color&&e.color.length>0?I[n]:r.default._COLOR(n)}).attr("x",function(t,n){return T(t instanceof Array?t[0]:n+1)-(Math.floor(f()/w.length)-a)/2}).attr("y",function(t){return k(t instanceof Array?t[1]:t)}).attr("height",function(t){var n=t instanceof Array?t[1]:t;return c()-k(n)}).attr("width",function(t){return Math.floor(f()/w.length)-a}),i.on("mouseenter",function(n){r.tooltip.showTooltip(n,o),t.select(this).transition().style("opacity","0.8")}).on("mousemove",function(){var n=t.event.pageX,e=t.event.pageY;r.tooltip.moveTooltip(o,n,e)}).on("mouseleave",function(){t.select(this).transition().style("opacity","1")}),Y&&function(){h.selectAll("text.text").data(w).enter().append("text").attr("class","text").attr("x",function(t,n){return T(t instanceof Array?t[0]:n+1)}).attr("y",function(t){return k(t instanceof Array?t[1]:t)+16}).style({fill:"#FFF","font-size":"12px"}).attr("text-anchor","middle").text(function(t){return t instanceof Array?t[1]:t})}()}function s(){return F.left}function c(){return g-F.bottom}function u(){return F.top}function f(){return v-F.left-F.right}function p(){return g-F.top-F.bottom}var d,h,y=t.select(n),m=parseFloat(y.style("width")),x=parseFloat(y.style("height")),v=e.width||m,g=e.height||x,A=e.scale,w=function(){return"linear"==A?e.data:r.utils.dfc.json2arr(e.data)}(),b=function(){return"linear"==A?t.max(e.data):"ordinal"==A?r.filter.maxInArrs(w)[1]:void 0}(),F=e.margin||r.default._MARGIN,T=function(){return"linear"==A?t.scale.linear().domain([0,w.length+1]).range([0,f()]):"ordinal"==A?t.scale.ordinal().domain(w.map(function(t){return t[0]})).rangePoints([0,v-2*F.left],1):void 0}(),k=t.scale.linear().domain([0,b]).range([p(),0]),I=e.color,M=e.ticks||5,O=e.showLineX||!1,X=e.showLineY||!1,Y=e.showText||!1,j=e.formatX||!1,L=e.formatY||!1,R=void 0===e.showAxisX||e.showAxisX,_=void 0===e.showAxisY||e.showAxisY;y.html(""),y.on("mouseleave",function(t){r.tooltip.hideTooltip(t,y)}),r.tooltip.initTooltip(y),function(){d||(d=y.append("svg").attr("height",g).attr("width",v),o(d),a(d)),i(d,y)}()},r.tooltip={},r.tooltip.initTooltip=function(t){var n,t=t;n||(n=t.append("div").attr("class","tooltip").style("opacity",0))},r.tooltip.showTooltip=function(t,n){var r=function(){return t instanceof Array?t[1]:t instanceof Object?t.data[1]:t}();n.select("div.tooltip").style("opacity",.8).html(r)},r.tooltip.moveTooltip=function(t,n,r){var e=t.select("div.tooltip"),o=parseFloat(t.style("width")),a=parseFloat(t.style("height")),i=parseFloat(e.style("width"))+30,l=parseFloat(e.style("height"))+30,n=n>=o/2?n-i-20:n+20,r=r>=a/2?r-l:r;e.transition().ease("linear").style("left",n+"px").style("top",r+10+"px")},r.tooltip.hideTooltip=function(t,n){n.select("div.tooltip").transition().style("opacity",0)},r.d3=t,r.crossfilter=n,r}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],t);else if("object"==typeof module&&module.exports){var n=require("d3"),r=require("crossfilter2");"function"!=typeof r&&(r=r.crossfilter),module.exports=t(n,r)}else this.dcharts=t(d3,crossfilter)}();