!function(){function t(t,e){var n={version:"2.0.1"};return n.default={},n.default._MARGIN={top:30,left:30,right:30,bottom:30},n.default._COLOR=t.scale.category10(),n.default._colorArr=["#5282e4","#b5c334","#fdcf10","#e97c24","#c1222a","#ff8562","#9bcb62","#fbd960","#f3a53a"],n.group={},n.group.options=function(e,r){var a={getSelector:function(){return t.select(e)},getBox:function(){return this.getSelector().select(".dcharts-container")},getSelWdith:function(){var t=this.getSelector();return parseFloat(t.style("width"))},getSelHeight:function(){var t=this.getSelector();return parseFloat(t.style("height"))},getWidth:function(){return parseFloat(r.width)||this.getSelWdith()},getHeight:function(){return parseFloat(r.height)||this.getSelHeight()},getScale:function(){return r.scale||"linear"},getData:function(){return n.handle.data(r.data)},getOriginalData:function(){return r.data},getValMax:function(){var e=-(1/0);return t.map(this.getData(),function(t){var r=n.filter.maxInArrs(t)[1];r>e&&(e=r)}),e},getValMin:function(){var e=1/0;return t.map(this.getData(),function(t){var r=n.filter.minInArrs(t)[1];r<e&&(e=r)}),e},getKeyMax:function(){var e=-(1/0);return t.map(this.getData(),function(t){var r=n.filter.maxInArrs(t)[0];r>e&&(e=r)}),e},getKeyMin:function(){var e=1/0;return t.map(this.getData(),function(t){var r=n.filter.minInArrs(t)[0];r<e&&(e=r)}),e},getRMax:function(){var e=-(1/0);return t.map(this.getData(),function(t){var r=n.filter.maxInArrs(t)[2];r>e&&(e=r)}),e},getRMin:function(){var e=1/0;return t.map(this.getData(),function(t){var r=n.filter.minInArrs(t)[2];r<e&&(e=r)}),e},getMargin:function(){return r.margin||n.default._MARGIN},getX:function(){if("linear"==this.getScale())return t.scale.linear().domain([0,this.getKeyMax()+1]).range([0,a.quadrantWidth()]);if("time"==this.getScale())return t.time.scale().domain([new Date(2e3,0,1).getTime(),new Date(2022,0,1).getTime()]).range([0,a.quadrantWidth()]);if("ordinal"==this.getScale()){var e=this.getData()[0];return t.scale.ordinal().domain(e.map(function(t){return t[0]})).rangePoints([0,this.quadrantWidth()],1)}},getY:function(){return t.scale.linear().domain([0,this.getValMax()]).range([a.quadrantHeight(),0])},getTicks:function(){return r.ticks},getInterpolate:function(){return r.interpolate||"linear"},getTension:function(){return r.tension||.7},getBottomPct:function(){return r.bottomPct||.25},showAxisX:function(){return void 0===r.showAxisX||r.showAxisX},showAxisY:function(){return void 0===r.showAxisY||r.showAxisY},showLineX:function(){return r.showLineX||!1},showLineY:function(){return r.showLineY||!1},axisTextX:function(){return r.axisTextX||""},axisTextY:function(){return r.axisTextY||""},showDot:function(){return r.showDot},showText:function(){return r.showText||!1},getColor:function(){return r.color||n.default._colorArr},getFormatX:function(){return r.formatX||""},getFormatY:function(){return r.formatY||""},getPadAngle:function(){return r.padAngle||0},getTitle:function(){return r.title||""},getOuterRadius:function(){return r.outerRadius||a.getWidth()/2-a.getMargin().left-a.getMargin().right},getInnerRadius:function(){return void 0!==r.innerRadius?r.innerRadius:a.getOuterRadius()/2},xStart:function(){return this.getMargin().left},yStart:function(){return this.getHeight()-this.getMargin().bottom},xEnd:function(){return this.getWidth()-this.getMargin().right},yEnd:function(){return this.getMargin().top},quadrantWidth:function(){return this.getWidth()-this.getMargin().left-this.getMargin().right},quadrantHeight:function(){return this.getHeight()-this.getMargin().bottom-this.getMargin().top},_dchartCont:null,_svg:null,_bodyG:null,_axesG:null,_defs:null,_bar:null,_area:null,_line:null,_dots:null,_pieG:null,_bubble:null,_axisXb:null,_axisXt:null,_axisYl:null,_axisYr:null,_hasGuidLineX:!1,_hasGuidLineY:!1};return a},n.group.renderSvg=function(t){if(!t._dchartCont){var e=t.getSelector();t._dchartCont=e.html("").append("div").attr("class","dcharts-container"),t._svg=t._dchartCont.append("svg"),t._svg.attr("height",t.getHeight()).attr("width",t.getWidth()),n.tooltip.initTooltip(t._dchartCont)}},n.group.renderBody=function(t){t._bodyG||(t._bodyG=t._svg.append("g").attr("class","body").attr("transform","translate("+t.xStart()+","+t.yEnd()+")").attr("clip-path","url(#body-clip)"))},n.group.renderAxes=function(e,r){switch(e._axesG||(e._axesG=e._svg.append("g").attr("class","axes")),r){case"x-bottom":!function(){e._axisXb||(e._axisXb=t.svg.axis().scale(e.getX()).orient("bottom").tickFormat(function(t){return t+e.getFormatX()}),e._axesG.append("g").attr("class","x-axis xb").attr("transform",function(){return"translate("+e.xStart()+","+e.yStart()+")"}).call(e._axisXb).append("text").attr("x",e.xEnd()-e.xStart()).attr("dy",40).style("text-anchor","end").text(e.axisTextX()),n.group._renderGridLineX(e,"xb"))}();break;case"x-top":!function(){e._axisXt||(e._axisXt=t.svg.axis().scale(e.getX()).orient("top").tickFormat(function(t){return t+e.getFormatX()}),e._axesG.append("g").attr("class","x-axis xt").attr("transform",function(){return"translate("+e.xStart()+","+e.yEnd()+")"}).call(e._axisXt).append("text").attr("x",e.xEnd()-e.xStart()).attr("dy",-40).style("text-anchor","end").text(e.axisTextX()),n.group._renderGridLineX(e,"xt"))}();break;case"y-left":!function(){e._axisYl||(e._axisYl=t.svg.axis().scale(e.getY()).orient("left").ticks(e.getTicks()).tickFormat(function(t){return t+e.getFormatY()}),e._axesG.append("g").attr("class","y-axis yl").attr("transform",function(){return"translate("+e.xStart()+","+e.yEnd()+")"}).call(e._axisYl).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",-40).style("text-anchor","end").text(e.axisTextY()),n.group._renderGridLineY(e,"yl"))}();break;case"y-right":!function(){e._axisYr||(e._axisYr=t.svg.axis().scale(e.getY()).orient("right").ticks(e.getTicks()).tickFormat(function(t){return t+e.getFormatY()}),e._axesG.append("g").attr("class","y-axis yr").attr("transform",function(){return"translate("+e.xEnd()+","+e.yEnd()+")"}).call(e._axisYr).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",40).style("text-anchor","end").text(e.axisTextY()),n.group._renderGridLineY(e,"yr"))}();break;default:console.error("参数有误")}},n.group._renderGridLineX=function(t,e){if(t.showLineX()&&!t._hasGuidLineX){var n="xb"==e?-t.quadrantHeight():t.quadrantHeight();t._axesG.selectAll("g.x-axis g.tick").append("line").classed("grid-line",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",n),t._hasGuidLineX=!0}},n.group._renderGridLineY=function(t,e){if(t.showLineY()&&!t._hasGuidLineY){var n="yl"==e?t.quadrantWidth():-t.quadrantWidth();t._axesG.selectAll("g.y-axis g.tick").append("line").classed("grid-line",!0).attr("x1",0).attr("y1",0).attr("x2",n).attr("y2",0),t._hasGuidLineY=!0}},n.group.renderLine=function(e){var r=e.getX(),a=e.getY(),i=e.getColor(),o=e.getData();e._line||(e._line=t.svg.line().x(function(t){return r(t[0])}).y(function(t){return a(t[1])}),e.getInterpolate()&&e._line.interpolate(e.getInterpolate()),e.getTension()&&e._line.tension(e.getTension()),e._bodyG.selectAll("path.line").data(o).enter().append("path").style("stroke",function(t,e){return void 0!==i&&i.length>0?i[e%i.length]:n.default._COLOR(e)}).attr("class","line"),e._bodyG.selectAll("path.line").data(o).transition().attr("d",function(t){return e._line(t)}))},n.group.renderArea=function(e){var r=e.getX(),a=e.getY(),i=e.getColor(),o=e.getData();e._area||(e._area=t.svg.area().x(function(t){return r(t[0])}).y0(a(0)).y1(function(t){return a(t[1])}),e.getInterpolate()&&e._area.interpolate(e.getInterpolate()),e.getTension()&&e._area.tension(e.getTension()),e._bodyG.selectAll("path.area").data(o).enter().append("path").style("fill",function(t,e){return void 0!==i&&i.length>0?i[e%i.length]:n.default._COLOR(e)}).transition().attr("class","area").attr("d",function(t){return e._area(t)}))},n.group.renderDots=function(t){var e=t.getX(),r=t.getY(),a=t.getColor(),i=t.getData();t._dots||i.forEach(function(i,o){t._dots=t._bodyG.selectAll("circle._"+o).data(i).enter().append("circle").attr("class","dot _"+o),t._bodyG.selectAll("circle._"+o).data(i).style("stroke",function(t){return void 0!==a&&a.length>0?a[o%a.length]:n.default._COLOR(o)}).transition().attr("cx",function(t){return e(t[0])}).attr("cy",function(t){return r(t[1])}).attr("r",4.5),n.tooltip.mountTooltip(t,t._dots)})},n.group.renderBar=function(e){var r=e.getData()[0],a=e.getX(),i=e.getY(),o=e.getColor(),l=.2*Math.floor(e.quadrantWidth()/r.length);e._bar||(e._bar=e._bodyG.selectAll("rect.bar").data(r).enter().append("rect").attr("class","bar"),e._bodyG.selectAll("rect.bar").data(r).attr("y",e.quadrantHeight()).transition().delay(function(t,e){return 100*e}).ease("linear").style("fill",function(t,e){return void 0!==o&&o.length>0?o[e%o.length]:n.default._COLOR(e)}).attr("x",function(t){return a(t[0])-(Math.floor(e.quadrantWidth()/r.length)-l)/2}).attr("y",function(t){return i(t[1])}).attr("height",function(t){return e.yStart()-i(t[1])}).attr("width",function(t){return Math.floor(e.quadrantWidth()/r.length)-l}),n.tooltip.mountTooltip(e,e._bar),e._bar.on("mouseenter.defult1",function(e){t.select(this).transition().style("opacity","0.8")}).on("mouseleave.defult3",function(){t.select(this).transition().style("opacity","1")}),e.showText()&&function(){e._bodyG.selectAll("text.text").data(r).enter().append("text").attr("class","text").attr("x",function(t,e){return a(t instanceof Array?t[0]:e+1)}).attr("y",function(t){return i(t instanceof Array?t[1]:t)+16}).style({fill:"#FFF","font-size":"12px"}).attr("text-anchor","middle").text(function(t){return t instanceof Array?t[1]:t})}())},n.group.renderPie=function(e){if(!e._pieG){var r=t.layout.pie().sort(function(t){return t[0]}).value(function(t){return t[1]}),a=t.svg.arc().outerRadius(e.getOuterRadius()).innerRadius(e.getInnerRadius()).padAngle(e.getPadAngle());e._pieG=e._bodyG.append("g").attr("class","pie").attr("transform","translate("+e.getOuterRadius()+","+e.getOuterRadius()+")"),n.group._renderSlices(r,a,e),n.group._renderLabels(r,a,e),function(){e._svg.append("text").attr("dx",e.getWidth()/2-e.getMargin().left).attr("dy",e.getWidth()/2-e.getMargin().top).style("text-anchor","middle").text(function(t){return e.getTitle()})}()}},n.group._renderSlices=function(e,r,a){var i=a.getData()[0],o=a._pieG.selectAll("path.arc").data(e(i)),l=a.getColor();a.getSelector();o.enter().append("path").attr("class","arc").attr("fill",function(t,e){return void 0!==l&&0!=l.length?l[e%l.length]:n.default._COLOR(e)}),o.transition().attrTween("d",function(e){var n=this.__current__;n||(n={startAngle:0,endAngle:0});var a=t.interpolate(n,e);return this.__current__=a(1),function(t){return r(a(t))}}),n.tooltip.mountTooltip(a,o)},n.group._renderLabels=function(t,e,n){var r=n.getData()[0],a=n._pieG.selectAll("text.label").data(t(r));a.enter().append("text").attr("class","label"),a.transition().attr("transform",function(t){return"translate("+e.centroid(t)+")"}).attr("dy",".35em").attr("text-anchor","middle").text(function(t){return t.data[0]})},n.group.renderBubble=function(e){var r=e.getData(),a=e.getRMax(r[0]),i=e.getRMin(r[0]),o=t.scale.pow().exponent(1).domain([i,a]).range([0,50]),l=e.getX(),u=e.getY(),s=e.getColor();e._bubble||(r.forEach(function(t,n){e._bubble=e._bodyG.selectAll("circle._"+n).data(t).enter().append("circle").attr("class","bubble _"+n),e._bodyG.selectAll("circle._"+n).data(t).style("stroke",function(t,e){return s[e%s.length]}).style("fill",function(t,e){return s[e%s.length]}).transition().attr("cx",function(t){return l(t[0])}).attr("cy",function(t){return u(t[1])}).attr("r",function(t){return t[2]?o(t[2]):5})}),n.tooltip.mountTooltip(e,e._bubble))},n.group.defineBodyClip=function(t){var e=.2*Math.floor(t.quadrantWidth()/t.getData()[0].length);t._defs||(t._defs=t._svg.append("defs"),t._defs.append("clipPath").attr("id","body-clip").append("rect").attr("x",0).attr("y",0).attr("width",t.quadrantWidth()+2*e).attr("height",t.quadrantHeight()))},n.handle={},n.handle.data=function(t){var e=t;if(0==e.length||!(e instanceof Array))return console.error("数据为空，或者非数组"),[[]];if(e[0]instanceof Array){if(void 0!==e[0][0]){if(e[0][0]instanceof Array)return e;if(e[0][0]instanceof Object){var t=[];return e.map(function(e){_a=n.utils.dfc.json2arr(e),t.push(_a)}),t}return console.error("数据格式错误"),[[]]}return 2==e[0].length||3==e[0].length?e:(console.error("数据格式错误"),[[]])}if(e[0]instanceof Object){return[n.utils.dfc.json2arr(e)]}if(Number(e[0])){var r=[];return e.map(function(t,e){var n=[e+1,t];r.push(n)}),[r]}return console.error("数据格式错误"),[[]]},n.utils={},n.utils.dfc={},n.utils.dfc.json2arr=function(t){var e=[];return t.map(function(t){var n=[];for(var r in t)n.push(t[r]);e.push(n)}),e},n.filter={},n.filter.maxInArrs=function(e){var n=[],r=[],a=[],i=0,o=0,l=0;return e.map(function(t){n.push(t[0]),r.push(t[1]),a.push(t[2])}),i=t.max(n,function(t){return+t}),o=t.max(r,function(t){return+t}),l=t.max(a,function(t){return+t}),[i,o,l]},n.filter.minInArrs=function(e){var n=[],r=[],a=[],i=0,o=0,l=0;return e.map(function(t){n.push(t[0]),r.push(t[1]),a.push(t[2])}),i=t.min(n,function(t){return+t}),o=t.min(r,function(t){return+t}),l=t.min(a,function(t){return+t}),[i,o,l]},n.barChart=function(t,e,r){function a(t,e){var r=n.group.options(t,e);n.group.renderSvg(r),n.group.renderAxes(r,"x-bottom"),n.group.renderAxes(r,"y-left"),n.group.defineBodyClip(r),n.group.renderBody(r),n.group.renderBar(r)}a(t,e),n.callback(t,e,a,r)},n.crossBarChart=function(e,r,a){function i(e,r){var a=n.group.options(e,r);a.data=a.getData()[0],a.x=t.scale.linear().domain([0,a.getValMax()]).range([0,a.quadrantWidth()]),a.y=t.scale.ordinal().domain(a.data.map(function(t){return t[0]})).rangePoints([0,a.quadrantHeight()],1),a.color=a.getColor(),a.padding=.2*Math.floor(a.quadrantHeight()/a.data.length),n.group.renderSvg(a),n.group.defineBodyClip(a),o(a),n.group.renderBody(a),l(a)}function o(e){e._axesG=e._svg.append("g").attr("class","axes"),e._axisYl=t.svg.axis().scale(e.y).orient("left").tickFormat(function(t){return t+e.getFormatY()}),e._axisXb=t.svg.axis().scale(e.x).orient("bottom").tickFormat(function(t){return t+e.getFormatX()}).ticks(e.getTicks()),e._axesG.append("g").attr("class","x-axis xb").attr("transform",function(){return"translate("+e.xStart()+","+e.yStart()+")"}).call(e._axisXb).append("text").attr("x",e.xEnd()-e.xStart()).attr("dy",40).style("text-anchor","end").text(e.axisTextY()),n.group._renderGridLineX(e,"xb"),e._axesG.append("g").attr("class","y-axis yl").attr("transform",function(){return"translate("+e.xStart()+","+e.yEnd()+")"}).call(e._axisYl).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",-40).style("text-anchor","end").text(e.axisTextX()),n.group._renderGridLineY(e,"yl")}function l(e){e._bar=e._bodyG.selectAll("rect.bar").data(e.data).enter().append("rect").attr("class","bar"),e._bar.style("fill",function(t,r){return void 0!==e.color&&e.color.length>0?e.color[r%e.color.length]:n.default._COLOR(r)}).attr("y",function(t){return e.y(t[0])-(Math.floor(e.quadrantHeight()/e.data.length)-e.padding)/2}).attr("x",function(t){return 0}).attr("width",0).transition().delay(function(t,e){return 100*e}).ease("linear").attr("width",function(t){return e.x(t[1])}).attr("height",function(t){return Math.floor(e.quadrantHeight()/e.data.length)-e.padding}),e.showText()&&function(){e._bodyG.selectAll("text.text").data(e.data).enter().append("text").attr("class","text").attr("y",function(t){return e.y(t[0])+6}).attr("x",function(t){return e.x(t[1])-12}).style({fill:"#fff","font-size":"12px"}).attr("text-anchor","middle").text(function(t){return t instanceof Array?t[1]:t})}(),n.tooltip.mountTooltip(e,e._bar),e._bar.on("mouseenter.defult1",function(e){t.select(this).transition().style("opacity","0.8")}).on("mouseleave.defult3",function(){t.select(this).transition().style("opacity","1")})}i(e,r),n.callback(e,r,i,a)},n.lineChart=function(t,e,r){function a(t,e){var r=n.group.options(t,e);n.group.renderSvg(r),n.group.renderAxes(r,"x-bottom"),n.group.renderAxes(r,"y-left"),n.group.renderBody(r),n.group.renderLine(r),n.group.renderDots(r)}a(t,e),n.callback(t,e,a,r)},n.areaChart=function(t,e,r){function a(t,e){var r=n.group.options(t,e);n.group.renderSvg(r),n.group.renderAxes(r,"x-bottom"),n.group.renderAxes(r,"y-left"),n.group.renderBody(r),n.group.renderLine(r),n.group.renderArea(r),n.group.renderDots(r)}a(t,e),n.callback(t,e,a,r)},n.pieChart=function(t,e,r){function a(t,e){var r=n.group.options(t,e);n.group.renderSvg(r),n.group.renderBody(r),n.group.renderPie(r)}a(t,e),n.callback(t,e,a,r)},n.stackChart=function(t,e,r){function a(t,e){var r=n.group.options(t,e);n.group.renderSvg(r),n.group.renderAxes(r,"x-bottom"),n.group.renderAxes(r,"y-left"),n.group.renderBody(r),n.group.defineBodyClip(r),n.group.renderStackBar(r)}a(t,e),n.callback(t,e,a,r)},n.group.renderStackBar=function(e){var r=e.getOriginalData(),a=t.layout.stack()(r),i=t.scale.ordinal().domain(r[0].map(function(t){return t.x})).rangePoints([0,e.quadrantWidth()],1),o=t.scale.linear().range([0,e.quadrantHeight()]).domain([0,t.max(a[a.length-1],function(t){return t.y0+t.y})]),l=e.getColor(),u=.4*Math.floor(e.quadrantWidth()/e.getData()[0].length),s=Math.floor(e.quadrantWidth()/r[0].length)-u,c=e._bodyG.selectAll("g").data(a).enter().append("g").attr("class","stack-group").style("fill",function(t,e){return l[e]}),d=c.selectAll("rect").data(function(t){return t}).enter().append("rect");d.attr("x",function(t){return i(t.x)-s/2}).attr("y",e.quadrantHeight()).transition().delay(function(t,e){return 100*e}).attr("y",function(t){return e.quadrantHeight()-o(t.y0)-o(t.y)}).attr("height",function(t){return o(t.y)}).attr("width",function(){return s}),n.tooltip.mountTooltip(e,d)},n.bubbleChart=function(t,e,r){function a(t,e){var r=n.group.options(t,e);n.group.renderSvg(r),n.group.renderAxes(r,"x-bottom"),n.group.renderAxes(r,"y-left"),n.group.renderBody(r),n.group.defineBodyClip(r),n.group.renderBubble(r)}a(t,e),n.callback(t,e,a,r)},n.indexCard=function(t,e,n){var t=document.querySelector(t),r=e,a=function(){var t=[];for(var e in r)t.push(r[e]);return t}(),i=document.createDocumentFragment(),o=document.createElement("div"),l=document.createElement("div");o.setAttribute("class","dcharts-container"),l.setAttribute("class","card");for(var u=0;u<a.length;u++){var s=document.createElement("p");s.innerHTML=a[u],i.appendChild(s)}l.appendChild(i),o.appendChild(l),t.appendChild(o)},n.funnelChart=function(t,e,r){function a(t,e){var r=n.group.options(t,e),a=r.getData()[0];console.log(a),new FunnelChart({data:a,width:r.getWidth(),height:r.getHeight(),bottomPct:r.getBottomPct()}).draw(t)}a(t,e),n.callback(t,e,a,r)},function(){window.FunnelChart=function(t){this.data=t.data,this.totalEngagement=0;for(var e=0;e<this.data.length;e++)this.totalEngagement+=this.data[e][1];this.width=void 0!==t.width?t.width:600,this.height=void 0!==t.height?t.height:400;var n=void 0!==t.bottomPct?t.bottomPct:1/3;this._slope=2*this.height/(this.width-n*this.width),this._totalArea=(this.width+n*this.width)*this.height/2},window.FunnelChart.prototype._getLabel=function(t){return this.data[t][0]},window.FunnelChart.prototype._getEngagementCount=function(t){return this.data[t][1]},window.FunnelChart.prototype._createPaths=function(){function t(e,n,r,a,i){i>=e.data.length||(area=e.data[i][1]*e._totalArea/e.totalEngagement,prevBaseLength=r-n,nextBaseLength=Math.sqrt((e._slope*prevBaseLength*prevBaseLength-4*area)/e._slope),nextLeftX=(prevBaseLength-nextBaseLength)/2+n,nextRightX=r-(prevBaseLength-nextBaseLength)/2,nextHeight=e._slope*(prevBaseLength-nextBaseLength)/2+a,points=[[nextRightX,nextHeight]],points.push([r,a]),points.push([n,a]),points.push([nextLeftX,nextHeight]),points.push([nextRightX,nextHeight]),trapezoids.push(points),t(e,nextLeftX,nextRightX,nextHeight,i+1))}return trapezoids=[],t(this,0,this.width,0,0),trapezoids},window.FunnelChart.prototype.draw=function(e,n){function r(t,e){var a=i.append("svg:path").attr("d",function(t){return o([u[e][0],u[e][1],u[e][2],u[e][2],u[e][1],u[e][2]])}).attr("fill","#fff");a.on("click",function(t){alert(t)}),nextHeight=u[e][[u[e].length]-1];var s=a.node().getTotalLength(),c=a.transition().duration(s/n).ease("linear").attr("d",function(t){return o(u[e])}).attr("fill",function(t){return l(e)});i.append("svg:text").text(t._getLabel(e)+": "+t._getEngagementCount(e)).attr("x",function(e){return t.width/2}).attr("y",function(t){return(u[e][0][1]+u[e][1][1])/2}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#fff"),e<u.length-1&&c.each("end",function(){r(t,e+1)})}n=void 0!==n?n:10;var a=t.select(e),i=a.html("").append("div").attr("class","dcharts-container").append("svg:svg").attr("width",this.width).attr("height",this.height).append("svg:g"),o=t.svg.line().x(function(t){return t[0]}).y(function(t){return t[1]}),l=t.scale.category10(),u=this._createPaths();r(this,0)}}(),n.legend=function(){},n.callback=function(t,e,n,r){function a(){var r=void 0!==arguments,a=r?arguments.length:0,i=r&&1==a&&"object"==typeof arguments?"object":"undefined";if(r&&2==a)e[arguments[0]]=arguments[1];else{if(!r||"object"!=i)return;var o=arguments[0];for(var l in o)e[l]=o[l]}n(t,e)}r&&r(a)},n.tooltip={timer:null},n.tooltip.initTooltip=function(t){var e,t=t;e||(e=t.append("div").attr("class","tooltip").style("opacity",0))},n.tooltip.mountTooltip=function(e,r){r.on("mouseenter",function(t){n.tooltip.showTooltip(t,e.getSelector())}).on("mousemove",function(){var r=t.mouse(e.getBox()[0][0]),a=r[0],i=r[1];n.tooltip.moveTooltip(e.getSelector(),a,i)}).on("mouseleave",function(){n.tooltip.hideTooltip(e.getSelector())})},n.tooltip.showTooltip=function(e,r){var a=function(){return e instanceof Array?"string"==typeof e[0]?e[0]+":"+e[1]:e[1]:e instanceof Object?e.x+":"+e.y:e}();t.select("body").selectAll("div.tooltip").transition().style("opacity",0),clearTimeout(n.tooltip.timer),r.select("div.tooltip").style("opacity",1).html(a)},n.tooltip.moveTooltip=function(t,e,r){var a=t.select("div.tooltip"),i=parseFloat(t.style("width")),o=parseFloat(t.style("height")),l=parseFloat(a.style("width"))+30,u=parseFloat(a.style("height"))+30,e=e>=i/2?e-l-20:e+20,r=r>=o/2?r-u:r;clearTimeout(n.tooltip.timer),a.transition().ease("linear").style("left",e+"px").style("top",r+10+"px")},n.tooltip.hideTooltip=function(t){clearTimeout(n.tooltip.timer),n.tooltip.timer=setTimeout(function(){n.tooltip._hide(t)},800)},n.tooltip._hide=function(t){t.select("div.tooltip").transition().style("opacity",0)},n.flicker={timer:null,flickerBegin:function(t){var e=t,n=this;clearInterval(this.timer),this.timer=setInterval(function(){n._flicke(e)},1e3)},flickerOver:function(e){clearInterval(this.timer),t.select(e).transition().duration(600).style({"fill-opacity":1,r:4.5})},_flicke:function(e){t.select(e).transition().ease("linear").duration(600).style({"fill-opacity":0,r:80}).transition().duration(20).style({"fill-opacity":1,r:4.5})}},n.d3=t,n.crossfilter=e,n}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],t);else if("object"==typeof module&&module.exports){var e=require("d3"),n=require("crossfilter2");"function"!=typeof n&&(n=n.crossfilter),module.exports=t(e,n)}else this.dcharts=t(d3,crossfilter)}();