<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>funnel chart</title>
    <style media="screen">
      *{padding: 0; margin: 0;}
      .div1{width: 30%; height: 400px; border: 1px solid #DDD;}
      .div2{width: 40%; height: 400px; border: 1px solid #DDD;}
    </style>
    <link rel="stylesheet" href="../../css/d3.css">
    <script type="text/javascript">
        window.onload = function() {
            var oBtn = document.querySelector('.btn');
            var oBtn2 = document.querySelector('.btn2');
            var ops1 = {
                data: [
                    {'name': '红茶', 'val': 50000},
                    {'name': '绿茶', 'val': 30000},
                    {'name': '咖啡', 'val': 10000},
                    {'name': '绿豆汤', 'val': 3000},
                    {'name': '雪碧', 'val': 20000},
                    {'name': '可乐', 'val': 26000}
                ],
                margin: {left: 30, top: 30, right: 160, bottom: 30},
                bottomPct: 1/5
            };
            var ops2 = {
                data: [
                    {'name': '绿茶', 'val': 30000},
                    {'name': '咖啡', 'val': 10000},
                    {'name': '绿豆汤', 'val': 3000},
                    {'name': '雪碧', 'val': 20000},
                    {'name': '可乐', 'val': 26000}
                ],
                margin: {left: 30, top: 30, right: 160, bottom: 30},
                bottomPct: 1/5
            };
            dcharts.funnelChart('.div1', ops1, function(set) {
                oBtn.onclick = function() {
                    set('color', ['red', 'orange', 'yellow', 'green']);
                };
                oBtn2.onclick = function() {
                    set({
                        'data': ops2.data
                    });
                };
            });
            dcharts.funnelChart('.div2', ops1);

            // window.onresize = function() {
            //     dcharts.funnelChart('.div2', ops1);
            // };
        };
    </script>
</head>
<body>
    <a href="#" class="btn">change color</a>
    <a href="#" class="btn2">change data</a>
    <div class="div1"> </div>
    <div class="div2"> </div>

    <script type="text/javascript" src="../../node_modules/d3/d3.js"></script>
    <script type="text/javascript" src="../../node_modules/crossfilter/crossfilter.js"></script>
    <script type="text/javascript" src="../../lib/dcharts.js"></script>
</body>
</html>
